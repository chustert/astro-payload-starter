---
/**
 * Card1 Component (Molecule)
 *
 * A basic, flexible card container for grouping related content.
 * Uses slots for maximum flexibility in content arrangement.
 *
 * Naming: Card1 follows Relume naming convention.
 * - Card1: Basic card with slots (this component)
 * - Card2: Would be card with image top
 * - Card3: Would be horizontal card layout
 *
 * @example
 * <Card1>
 *   <div slot="header">Card Header</div>
 *   <p>Card content goes here</p>
 *   <div slot="footer">Card Footer</div>
 * </Card1>
 *
 * @customization
 * Override these CSS variables to customize:
 * --card1-bg, --card1-padding, --card1-border-radius
 * --card1-shadow, --card1-border-color, --card1-border-width
 */

interface Props {
  /** Card style variant */
  variant?: 'elevated' | 'outlined' | 'filled';
  /** Remove padding (useful for images) */
  noPadding?: boolean;
  /** Make card interactive (clickable) */
  interactive?: boolean;
  /** Link href (makes entire card clickable) */
  href?: string;
  /** Additional CSS classes */
  class?: string;
  [key: string]: any;
}

const {
  variant = 'elevated',
  noPadding = false,
  interactive = false,
  href,
  class: className = '',
  ...rest
} = Astro.props;

const isLink = !!href;
const Element = isLink ? 'a' : 'article';

const classes = [
  'card1',
  `card1--${variant}`,
  noPadding && 'card1--no-padding',
  (interactive || isLink) && 'card1--interactive',
  className,
].filter(Boolean).join(' ');

const hasHeader = Astro.slots.has('header');
const hasFooter = Astro.slots.has('footer');
const hasMedia = Astro.slots.has('media');
---

<Element class={classes} href={isLink ? href : undefined} {...rest}>
  {hasMedia && (
    <div class="card1_media">
      <slot name="media" />
    </div>
  )}

  {hasHeader && (
    <div class="card1_header">
      <slot name="header" />
    </div>
  )}

  <div class="card1_body">
    <slot />
  </div>

  {hasFooter && (
    <div class="card1_footer">
      <slot name="footer" />
    </div>
  )}
</Element>

<style>
  .card1 {
    display: flex;
    flex-direction: column;
    overflow: hidden;

    /* Shape */
    border-radius: var(--card1-border-radius, var(--radius-lg));

    /* Default padding */
    --card1-section-padding: var(--card1-padding, var(--space-6));
  }

  /* ============================================
     Variant Styles
     ============================================ */

  .card1--elevated {
    background-color: var(--card1-elevated-bg, var(--color-bg-primary));
    box-shadow: var(--card1-elevated-shadow, var(--shadow-md));
  }

  .card1--outlined {
    background-color: var(--card1-outlined-bg, var(--color-bg-primary));
    border: var(--card1-border-width, 1px) solid
            var(--card1-border-color, var(--color-border-default));
  }

  .card1--filled {
    background-color: var(--card1-filled-bg, var(--color-bg-secondary));
  }

  /* ============================================
     Interactive State
     ============================================ */

  .card1--interactive {
    cursor: pointer;
    transition:
      transform var(--transition-fast),
      box-shadow var(--transition-fast),
      border-color var(--transition-fast);
    text-decoration: none;
    color: inherit;
  }

  .card1--interactive:hover {
    transform: var(--card1-hover-transform, translateY(-2px));
  }

  .card1--elevated.card1--interactive:hover {
    box-shadow: var(--card1-hover-shadow, var(--shadow-lg));
  }

  .card1--outlined.card1--interactive:hover {
    border-color: var(--card1-hover-border-color, var(--color-border-strong));
  }

  .card1--interactive:focus-visible {
    outline: 2px solid var(--color-border-focus);
    outline-offset: 2px;
  }

  /* ============================================
     Card Sections
     ============================================ */

  .card1_media {
    /* Media slot has no padding by default */
  }

  .card1_media :global(img),
  .card1_media :global(video) {
    width: 100%;
    height: auto;
    display: block;
  }

  .card1_header {
    padding: var(--card1-section-padding);
    padding-bottom: 0;
  }

  .card1_body {
    padding: var(--card1-section-padding);
    flex: 1;
  }

  .card1_footer {
    padding: var(--card1-section-padding);
    padding-top: 0;
  }

  /* ============================================
     Modifiers
     ============================================ */

  .card1--no-padding {
    --card1-section-padding: 0;
  }

  .card1--no-padding .card1_body {
    padding: var(--card1-padding, var(--space-6));
  }
</style>
